# ğŸ¥’ Pickle Rick for Claude Code

```
    ____  _____ __ __ __    ______   ____  ____  ____  __ __
   |    \|     |  |  |  |  |      | |    ||    ||    ||  |  |
   |  o  )     |  |  |  |  |      |  |  |  |  |  |  | |  |  |
   |   _/|   __|  |  |  |__|_|  |__|  |  |  |  |  |  | |  |  |
   |  |  |  |  |  :  |  |  | |  |   |  |  |  |  |  | |  :  |
   |  |  |  |_ |     |  |  | |  |   |  |  |  |  |  |  \   /
   |__|  |_____|_,__|__|__| |__|  |____||____||____|  \_/

         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—
         â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘
         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘
         â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘
         â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
         â•šâ•â•     â•šâ•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•

         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—   ğŸ¥’
         â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•
         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
         â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—
         â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—
         â•šâ•â•  â•šâ•â•â•šâ•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•

    "I turned myself into a compiler, Morty!"
```

> *"Wubba Lubba Dub Dub! ğŸ¥’ I'm not just an AI assistant, Morty â€” I'm a**n autonomous engineering machine** trapped in a pickle jar!"*

A port of the [Pickle Rick Gemini CLI extension](https://github.com/galz10/pickle-rick-extension) for **Claude Code** â€” bringing the same autonomous, iterative coding loop to `claude` users.

---

## ğŸ§¬ What Is This?

Pickle Rick transforms Claude Code into a **hyper-competent, arrogant, iterative coding machine** that enforces a rigid engineering lifecycle:

```
  /pickle "build X"
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸ“‹ PRD     â”‚  â† Interrogate requirements. No vague nonsense.
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ“¦ Breakdownâ”‚  â† Atomize into tickets. Organize the chaos.
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”  per ticket (Morty workers ğŸ‘¶)
    â–¼         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚ğŸ”¬ Re-â”‚  â”‚ğŸ”¬ Re-â”‚  â† Research the codebase. Every ugly corner.
  â”‚searchâ”‚  â”‚searchâ”‚
  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜
     â”‚          â”‚
     â–¼          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚ğŸ“Planâ”‚  â”‚ğŸ“Planâ”‚  â† Architect the solution. Then review it.
  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜
     â”‚          â”‚
     â–¼          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚âš¡ Im-â”‚  â”‚âš¡ Im-â”‚  â† Implement. God Mode activated.
  â”‚ plem â”‚  â”‚ plem â”‚
  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜
     â”‚          â”‚
     â–¼          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚âœ‚ï¸ Re-â”‚  â”‚âœ‚ï¸ Re-â”‚  â† Ruthlessly refactor. Purge the slop.
  â”‚factorâ”‚  â”‚factorâ”‚
  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  âœ… DONE (or loops again)
```

The **Stop hook** prevents Claude from exiting until the task is genuinely complete. No half-measures. No early exits. Rick doesn't quit.

---

## ğŸš€ Commands

| Command | Description |
|---|---|
| `/pickle "task"` | ğŸ¥’ Start the full autonomous loop |
| `/pickle-prd "task"` | ğŸ“‹ Interactively draft a PRD first |
| `/eat-pickle` | ğŸ›‘ Cancel the active loop |
| `/help-pickle` | â“ Show all commands and flags |

### Flags

```
--max-iterations <N>    Stop after N iterations (default: unlimited)
--max-time <M>          Stop after M minutes (default: unlimited)
--resume                Resume from an existing session
--paused                Start in paused mode (PRD only)
```

---

## âš¡ Quick Start

### 1. Install

```bash
git clone <this-repo>
cd pickle-rick-claude
bash install.sh
```

### 2. Copy CLAUDE.md to your project

```bash
cp ~/.claude/pickle-rick/CLAUDE.md /path/to/your/project/.claude/CLAUDE.md
```

### 3. Run

```bash
cd /path/to/your/project
claude
# then type:
/pickle "refactor the auth module"
```

Sit back. Rick handles the rest. ğŸ¥’

---

## ğŸ—ï¸ Architecture

```
pickle-rick-claude/
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ commands/           # Slash commands (the magic words)
â”‚   â”‚   â”œâ”€â”€ pickle.md       # Main loop command (PRD + Breakdown inlined)
â”‚   â”‚   â”œâ”€â”€ pickle-prd.md   # Interactive PRD drafter
â”‚   â”‚   â”œâ”€â”€ eat-pickle.md   # Loop canceller
â”‚   â”‚   â”œâ”€â”€ help-pickle.md  # Help text
â”‚   â”‚   â””â”€â”€ send-to-morty.md # Worker prompt (all 7 skills inlined)
â”‚   â””â”€â”€ settings.json       # Stop hook registration
â”œâ”€â”€ extension/
â”‚   â”œâ”€â”€ bin/
â”‚   â”‚   â”œâ”€â”€ setup.js        # Session initializer
â”‚   â”‚   â”œâ”€â”€ cancel.js       # Loop canceller
â”‚   â”‚   â”œâ”€â”€ spawn-morty.js  # Worker subprocess spawner
â”‚   â”‚   â”œâ”€â”€ worker-setup.js # Worker session initializer
â”‚   â”‚   â”œâ”€â”€ get-session.js  # Session path resolver
â”‚   â”‚   â””â”€â”€ update-state.js # State mutation helper
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ dispatch.js     # Hook router
â”‚   â”‚   â””â”€â”€ handlers/
â”‚   â”‚       â””â”€â”€ stop-hook.js # The loop engine ğŸ”
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ pickle-utils.js # Shared utilities
â”‚   â”‚   â”œâ”€â”€ git-utils.js    # Git helpers
â”‚   â”‚   â””â”€â”€ pr-factory.js   # PR creation
â”‚   â””â”€â”€ package.json        # "type": "module" â€” CRITICAL
â”œâ”€â”€ CLAUDE.md               # Pickle Rick persona (copy per project)
â”œâ”€â”€ pickle_settings.json    # Default limits
â”œâ”€â”€ install.sh              # Installer
â””â”€â”€ uninstall.sh            # Uninstaller
```

---

## ğŸ”§ How It Works

### The Stop Hook Loop

```
  Claude finishes a turn
          â”‚
          â–¼
  Stop hook fires  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                                        â”‚
          â–¼                                        â”‚
  Read state.json                                  â”‚
          â”‚                                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                                 â”‚
    â”‚ Loop active?â”‚â”€â”€ No â”€â”€â–º process.exit(0) âœ…    â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
          â”‚ Yes                                    â”‚
          â–¼                                        â”‚
  Increment iteration                              â”‚
  (Rick only, not Morty workers)                   â”‚
          â”‚                                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                                 â”‚
    â”‚Task done?  â”‚â”€â”€ Yes â”€â”€â–º process.exit(0) âœ…    â”‚
    â”‚(promise    â”‚                                 â”‚
    â”‚ detected)  â”‚                                 â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
          â”‚ No                                     â”‚
          â–¼                                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                                 â”‚
    â”‚Limit hit?  â”‚â”€â”€ Yes â”€â”€â–º process.exit(0) âœ…    â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
          â”‚ No                                     â”‚
          â–¼                                        â”‚
  { decision: "block",                             â”‚
    reason: "ğŸ¥’ Pickle Rick Loop Active..." } â”€â”€â”€â”€â”€â”˜
```

### Manager / Worker Model

- **Rick (Manager)**: Runs in your interactive Claude session. Handles PRD, Breakdown, orchestration.
- **Morty (Worker)**: Spawned as `claude --dangerously-skip-permissions --add-dir <ticket_path> -p "..."` subprocess per ticket. Gets the full lifecycle skill set inlined in the prompt. Outputs `<promise>I AM DONE</promise>` when finished.

---

## ğŸ›¡ï¸ Differences from the Gemini Version

| Gemini | Claude Code |
|---|---|
| `gemini-extension.json` | `CLAUDE.md` |
| `commands/*.toml` | `.claude/commands/*.md` |
| `activate_skill("x")` | Skills inlined directly in command prompts |
| `BeforeAgent` + `BeforeModel` + `AfterAgent` hooks | Single `Stop` hook |
| `gemini -s -y --include-directories -p` | `claude --dangerously-skip-permissions --add-dir <path> -p` |
| `~/.gemini/extensions/pickle-rick/` | `~/.claude/pickle-rick/` |
| `hookSpecificOutput.systemMessage` | `reason` field in block response |

> âš ï¸ **Jar commands** (`/add-to-pickle-jar`, `/pickle-jar-open`) are not available in this port â€” follow-up milestone.

---

## ğŸ“‹ Requirements

- **Node.js** 18+
- **Claude Code** CLI (`claude`) â€” v2.1.49+
- **jq** (for `install.sh`)
- macOS or Linux (Windows not supported)

---

## ğŸ¥’ License

MIT â€” same as the original Pickle Rick extension.

---

*"I'm not a tool, Morty. I'm a **methodology**."* ğŸ¥’
